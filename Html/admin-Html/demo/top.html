<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>子窗口操作</title>
    <link rel="stylesheet" href="../frame/layui/css/layui.css">
    <link rel="stylesheet" href="../frame/static/css/style.css">
    <link rel="icon" href="../frame/static/image/code.png">
</head>
<body class="body">
<div class="site-demo-button" id="layerDemo" style="margin-bottom: 0;">
  <!-- <button data-method="setTop" id="add" class="layui-btn">多窗口模式，层叠置顶</button> -->
  <a href="" dialog-type="load" class="layui-btn">点我</a>
</div>
 
<script type="text/javascript" src="../frame/layui/layui.js"></script>
<script type="text/javascript" src="../js/index.js"></script>
<script type="text/javascript">
layui.use('layer', function(){ //独立版的layer无需执行这一句
     var $ = layui.jquery, layer = layui.layer;
     //独立版的layer无需执行这一句
  // $("a[dialog-type='load']").on('click', function() {
  // $("#add").on('click', function() {
    $(".body").on("click", "a[dialog-type='load']", function () {
    // $(document).on("click", "a[dialog-type='load']", function () {
       layer.open({
        type: 1 //此处以iframe举例
        ,title: '当你选择该窗体时，即会在最顶端'
        ,area: ['390px', '260px']
        ,shade: 0
        ,maxmin: true
        ,offset: ['200px'] 
        ,content: 'http://layer.layui.com/test/settop.html'
        ,btn: ['继续弹出', '全部关闭'] 
        ,yes: function(){
          // $(that).click(); 
          alert("yes");
        }
        ,btn2: function(){
          layer.closeAll();
        }
        ,zIndex: layer.zIndex //重点1
        ,success: function(layero){
          layer.setTop(layero); //重点2
          // alert("成功了333");
        }
        ,cancel: function(index, layero){ 
            if (confirm('确定要关闭么')) { //只有当点击confirm框的确定时，该层才会关闭
                layer.close(index)
            }
            return false; 
        }
      });
    });

  //触发事件
/*  var active = {
    setTop: function(){
      var that = this; 
      //多窗口模式，层叠置顶
      layer.open({
         type: 1 //此处以iframe举例
        ,title: '当你选择该窗体时，即会在最顶端'
        ,area: ['390px', '260px']
        ,shade: 0
        ,maxmin: true
        ,offset: [ //为了演示，随机坐标
          // Math.random()*($(window).height()-300),
          // Math.random()*($(window).width()-390)
          '100px'
        ] 
        ,content: 'http://layer.layui.com/test/settop.html'
        ,btn: ['继续弹出', '全部关闭'] //只是为了演示
        ,yes: function(){
          $(that).click(); 
        }
        ,btn2: function(){
          layer.closeAll();
        }
        ,zIndex: layer.zIndex //重点1
        ,success: function(layero){
          layer.setTop(layero); //重点2
        }
        ,cancel: function(index, layero){ 
            if (confirm('确定要关闭么')) { //只有当点击confirm框的确定时，该层才会关闭
                layer.close(index)
            }
            return false; 
        }
      });
    }
  };*/
  
/*  $('#layerDemo .layui-btn').on('click', function(){
    var othis = $(this), method = othis.data('method');
    active[method] ? active[method].call(this, othis) : '';
  });*/
  
});
</script>
</body>
</html>